<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>小兵兵</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="小兵兵">
<meta property="og:url" content="https://shenlibing.github.io/myhexo/page/2/index.html">
<meta property="og:site_name" content="小兵兵">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小兵兵">
  
    <link rel="alternate" href="/myhexo/atom.xml" title="小兵兵" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/myhexo/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/myhexo/" id="logo">小兵兵</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/myhexo/">Home</a>
        
          <a class="main-nav-link" href="/myhexo/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/myhexo/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://shenlibing.github.io/myhexo"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-二维矩阵显示账户类型和资质_ajax异步传参_插入mysql中文乱码" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/myhexo/2019/01/22/二维矩阵显示账户类型和资质_ajax异步传参_插入mysql中文乱码/" class="article-date">
  <time datetime="2019-01-22T04:58:55.000Z" itemprop="datePublished">2019-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/myhexo/2019/01/22/二维矩阵显示账户类型和资质_ajax异步传参_插入mysql中文乱码/">二维矩阵显示账户类型和资质_ajax异步传参_插入mysql中文乱码</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、二维矩阵显示账号类型和资质</p>
<p>效果：</p>
<p><img src="https://i.imgur.com/H6MtJqE.png" alt=""></p>
<p>表结构：</p>
<p>账号类型和资质中间表</p>
<p><img src="https://i.imgur.com/JrwRXlC.png" alt=""></p>
<p>资质表</p>
<p><img src="https://i.imgur.com/dqgX6f3.png" alt=""></p>
<p>思路：</p>
<p>业务层查出账户和资质中间表、资质表、账户表数据，前端展示图横轴根据账户数据填充，纵轴根据资质数据填充，选择框的确定–根据<strong>账户资质中间表数据</strong>和选择框上<strong>自定义属性绑定的账户名、资质id</strong>进行相等比较确定。</p>
<p>前端：</p>
<p>1）单选框勾选关系初始化</p>
<p><img src="https://i.imgur.com/TgzMKiS.png" alt=""></p>
<p>2）异步传参(封装成实体)</p>
<p>实体对象必须有get和set方法</p>
<p><img src="https://i.imgur.com/Frl8lPj.png" alt=""></p>
<p><img src="https://i.imgur.com/5r8EtpQ.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">	    //设置导航条上的显示</span><br><span class="line">				pageContext.setAttribute(&quot;navinfo&quot;, &quot;分类管理&quot;);</span><br><span class="line">				//设置点击高亮效果</span><br><span class="line">				pageContext.setAttribute(&quot;curUrl&quot;, &quot;servicectrl/type/ctrl&quot;);</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;!--引入导航条  --&gt;</span><br><span class="line">	&lt;%@include file=&quot;/WEB-INF/includes/nav-bar.jsp&quot;%&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">		&lt;div class=&quot;row&quot;&gt;</span><br><span class="line">			&lt;!--引入树形菜单  --&gt;</span><br><span class="line">			&lt;%@include file=&quot;/WEB-INF/includes/user_menu.jsp&quot;%&gt;</span><br><span class="line"></span><br><span class="line">			&lt;div class=&quot;col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main&quot;&gt;</span><br><span class="line">				&lt;div class=&quot;panel panel-default&quot;&gt;</span><br><span class="line">					&lt;div class=&quot;panel-heading&quot;&gt;</span><br><span class="line">						&lt;h3 class=&quot;panel-title&quot;&gt;</span><br><span class="line">							&lt;i class=&quot;glyphicon glyphicon-th&quot;&gt;&lt;/i&gt; 数据矩阵</span><br><span class="line">						&lt;/h3&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">					&lt;div class=&quot;panel-body&quot;&gt;</span><br><span class="line">						&lt;div class=&quot;table-responsive&quot;&gt;</span><br><span class="line">							&lt;table class=&quot;table  table-bordered&quot;&gt;</span><br><span class="line">								&lt;thead&gt;</span><br><span class="line">									&lt;tr&gt;</span><br><span class="line">										&lt;th&gt;名称&lt;/th&gt;</span><br><span class="line">										&lt;c:forEach items=&quot;$&#123;types&#125;&quot; var=&quot;type&quot;&gt;</span><br><span class="line">											&lt;th&gt;$&#123;type&#125;&lt;/th&gt;</span><br><span class="line">										&lt;/c:forEach&gt;</span><br><span class="line">									&lt;/tr&gt;</span><br><span class="line">								&lt;/thead&gt;</span><br><span class="line">								&lt;tbody&gt;</span><br><span class="line">									&lt;c:forEach items=&quot;$&#123;certs&#125;&quot; var=&quot;cert&quot;&gt;</span><br><span class="line">										&lt;tr&gt;</span><br><span class="line">											&lt;td&gt;$&#123;cert.name&#125;&lt;/td&gt;</span><br><span class="line">											&lt;c:forEach items=&quot;$&#123;types&#125;&quot; var=&quot;type&quot;&gt;</span><br><span class="line">												&lt;td&gt;&lt;input class=&apos;checkSimple&apos; type=&quot;checkbox&quot;</span><br><span class="line">													type_name=&apos;$&#123;type&#125;&apos; cid=&apos;$&#123;cert.id&#125;&apos;&gt;&lt;/td&gt;</span><br><span class="line">											&lt;/c:forEach&gt;</span><br><span class="line">									&lt;/c:forEach&gt;</span><br><span class="line">									&lt;/tr&gt;</span><br><span class="line">								&lt;/tbody&gt;</span><br><span class="line">							&lt;/table&gt;</span><br><span class="line">						&lt;/div&gt;</span><br><span class="line">					&lt;/div&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;%@include file=&quot;/WEB-INF/includes/js-file.jsp&quot;%&gt;</span><br><span class="line">	&lt;!-- 引入树形菜单结构点击时动态显示页面高亮效果的js --&gt;</span><br><span class="line">	&lt;%@include file=&quot;/WEB-INF/includes/common-js.jsp&quot;%&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">		$(function() &#123;</span><br><span class="line">			$(&quot;.list-group-item&quot;).click(function() &#123;</span><br><span class="line">				if ($(this).find(&quot;ul&quot;)) &#123;</span><br><span class="line">					$(this).toggleClass(&quot;tree-closed&quot;);</span><br><span class="line">					if ($(this).hasClass(&quot;tree-closed&quot;)) &#123;</span><br><span class="line">						$(&quot;ul&quot;, this).hide(&quot;fast&quot;);</span><br><span class="line">					&#125; else &#123;</span><br><span class="line">						$(&quot;ul&quot;, this).show(&quot;fast&quot;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		$(function() &#123;</span><br><span class="line">			//页面加载完成获取账户类型和资质的关系</span><br><span class="line">			var list_type_cert = &apos;$&#123;list_type_cert_json&#125;&apos;</span><br><span class="line">			log(&apos;list_type_cert&apos;, list_type_cert)</span><br><span class="line">			//string</span><br><span class="line">			log(&apos;list_type_cert type=======&gt;&apos;, typeof (list_type_cert))</span><br><span class="line">			//JSON.parse(list_type_cert) 字符串转成json对象</span><br><span class="line">			$.each(JSON.parse(list_type_cert),function(index, content) &#123;</span><br><span class="line">				log(index, content, content.accttype,content.certid)</span><br><span class="line">				$(&apos;.checkSimple&apos;).each(function() &#123;</span><br><span class="line">					//attr获取自定义属性值</span><br><span class="line">					if ($(this).attr(&apos;type_name&apos;) == (content.accttype)&amp;&amp; $(this).attr(&apos;cid&apos;) == (content.certid)) &#123;</span><br><span class="line">						//设置原生属性值</span><br><span class="line">						$(this).prop(&apos;checked&apos;,true)</span><br><span class="line">					&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">			//执行事件</span><br><span class="line">			__main()</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		//更新</span><br><span class="line">		var update_type_cert_event = function() &#123;</span><br><span class="line">			var tAccountTypeCert = &#123;&#125;</span><br><span class="line">			log(&apos;update_type_cert_event=============&gt;&apos;)</span><br><span class="line">			$(&apos;body&apos;).on(&apos;click&apos;, &apos;input&apos;, function() &#123;</span><br><span class="line">				log(&apos;update==========&gt;&apos;, this)</span><br><span class="line">				var flag = $(this).prop(&apos;checked&apos;)</span><br><span class="line">				log(&apos;flag==========&gt;&apos;, flag)</span><br><span class="line">				accttype = $(this).attr(&apos;type_name&apos;)</span><br><span class="line">				certid = $(this).attr(&apos;cid&apos;)</span><br><span class="line">				log(accttype, certid)</span><br><span class="line"></span><br><span class="line">				tAccountTypeCert.accttype = accttype</span><br><span class="line">				tAccountTypeCert.certid = certid</span><br><span class="line">				tAccountTypeCert.flag = flag</span><br><span class="line">				var url = &apos;$&#123;ctp&#125;/servicectrl/type/update_type_cert&apos;</span><br><span class="line">				var data = tAccountTypeCert</span><br><span class="line">				$.getJSON(url, data, function(result) &#123;</span><br><span class="line">					log(result)</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">		var __main = function() &#123;</span><br><span class="line">			update_type_cert_event()</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>控制层：</p>
<p>1)接收异步传参实体返回json</p>
<p><img src="https://i.imgur.com/7Pcl0Tu.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package com.atguigu.scw.manager.controller.manager;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line">import com.atguigu.scw.manager.bean.TAccountTypeCert;</span><br><span class="line">import com.atguigu.scw.manager.bean.TCert;</span><br><span class="line">import com.atguigu.scw.manager.service.CertService;</span><br><span class="line">import com.atguigu.scw.manager.service.CertTypeService;</span><br><span class="line">import com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/servicectrl/type&quot;)</span><br><span class="line">public class TypeController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    CertService certService;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    CertTypeService cTypeService;</span><br><span class="line"></span><br><span class="line">    private static ObjectMapper MAPPER = new ObjectMapper();</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/ctrl&quot;)</span><br><span class="line">    public String list(Model model) throws Exception &#123;</span><br><span class="line">        System.out.println(&quot;分类管理界面============&gt;&quot;);</span><br><span class="line"></span><br><span class="line">        // 1、先去数据库查出表格横向的显示数据</span><br><span class="line">        List&lt;String&gt; types = Arrays.asList(&quot;商业公司&quot;, &quot;个体工商户&quot;, &quot;个人经营&quot;, &quot;政府及非营利组织&quot;);</span><br><span class="line"></span><br><span class="line">        // 2、在查出纵向要显示的标题</span><br><span class="line">        List&lt;TCert&gt; certs = certService.getAllCert();</span><br><span class="line">        System.out.println(&quot;资质===========&gt;&quot;);</span><br><span class="line">        System.out.println(certs);</span><br><span class="line"></span><br><span class="line">        // 3、查询经营类型与资质关系中间表</span><br><span class="line">        // List&lt;TAccountTypeCert&gt; cTypeService.getAllCertType();</span><br><span class="line">        List&lt;TAccountTypeCert&gt; list_type_cert = cTypeService.getAllCertType();</span><br><span class="line">        System.out.println(&quot;经营类型===============&gt;&quot;);</span><br><span class="line">        System.out.println(list_type_cert);</span><br><span class="line"></span><br><span class="line">        // 4、将数据放到模型域当中</span><br><span class="line">        model.addAttribute(&quot;types&quot;, types);</span><br><span class="line">        model.addAttribute(&quot;certs&quot;, certs);</span><br><span class="line">        // list转json字符串</span><br><span class="line">        String list_type_cert_json = MAPPER.writeValueAsString(list_type_cert);</span><br><span class="line">        System.out.println(&quot;经营类型--资质----&quot;);</span><br><span class="line">        System.out.println(list_type_cert_json);</span><br><span class="line">        model.addAttribute(&quot;list_type_cert_json&quot;, list_type_cert_json);</span><br><span class="line"></span><br><span class="line">        return &quot;manager/servicemanager/type&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;/update_type_cert&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String update_type_cert(TAccountTypeCert tAccountTypeCert) &#123;</span><br><span class="line">        System.out.println(&quot;更新经营类型---资质==========&gt;&quot;);</span><br><span class="line">        System.out.println(tAccountTypeCert);</span><br><span class="line">        boolean flag = tAccountTypeCert.isFlag();</span><br><span class="line">        System.out.println(&quot;flag============&gt;&quot;);</span><br><span class="line">        System.out.println(flag);</span><br><span class="line">        if (flag) &#123;</span><br><span class="line">            System.out.println(&quot;增加一条记录========&gt;&quot;);</span><br><span class="line">            int count = cTypeService.updateTypeCert(tAccountTypeCert);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;移除一条记录========&gt;&quot;);</span><br><span class="line">            cTypeService.removeTypeCert(tAccountTypeCert);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &quot;success&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>业务层：</p>
<p>1）单表的写读操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">package com.atguigu.scw.manager.service.impl;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">import com.atguigu.scw.manager.bean.TAccountTypeCert;</span><br><span class="line">import com.atguigu.scw.manager.bean.TAccountTypeCertExample;</span><br><span class="line">import com.atguigu.scw.manager.bean.TAccountTypeCertExample.Criteria;</span><br><span class="line">import com.atguigu.scw.manager.dao.TAccountTypeCertMapper;</span><br><span class="line">import com.atguigu.scw.manager.service.CertTypeService;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class CertTypeServiceImpl implements CertTypeService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    TAccountTypeCertMapper mapper;</span><br><span class="line"></span><br><span class="line">    //查询资质和账户中间表</span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;TAccountTypeCert&gt; getAllCertType() &#123;</span><br><span class="line">        List&lt;TAccountTypeCert&gt; list_type_cert = mapper.selectByExample(null);</span><br><span class="line">        return list_type_cert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 增加经营类型--资质</span><br><span class="line">    @Override</span><br><span class="line">    public int updateTypeCert(TAccountTypeCert tAccountTypeCert) &#123;</span><br><span class="line">        int count = mapper.insertSelective(tAccountTypeCert);</span><br><span class="line">        return count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 删除经营类型--资质</span><br><span class="line">    @Override</span><br><span class="line">    public int removeTypeCert(TAccountTypeCert tAccountTypeCert) &#123;</span><br><span class="line">        TAccountTypeCertExample example = new TAccountTypeCertExample();</span><br><span class="line">        Criteria criteria = example.createCriteria();</span><br><span class="line">        criteria.andAccttypeEqualTo(tAccountTypeCert.getAccttype());</span><br><span class="line">        criteria.andCertidEqualTo(tAccountTypeCert.getCertid());</span><br><span class="line">        int count = mapper.deleteByExample(example);</span><br><span class="line">        return count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、mysql插入中文乱码</p>
<p>1）数据库编码和web.xml配置均为utf-8，Controller读取到的是正确的中文，但是保存到数据库后变成”??”</p>
<p>解决</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/scw_0325?useUnicode=true&amp;amp;characterEncoding=UTF-8&quot; &gt;&lt;/property&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/SYguSUW.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenlibing.github.io/myhexo/2019/01/22/二维矩阵显示账户类型和资质_ajax异步传参_插入mysql中文乱码/" data-id="cjr7dlcz9000av0ueuzppnk0q" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ztree树形结构菜单_mybatis分页查询" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/myhexo/2019/01/22/ztree树形结构菜单_mybatis分页查询/" class="article-date">
  <time datetime="2019-01-22T04:58:55.000Z" itemprop="datePublished">2019-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/myhexo/2019/01/22/ztree树形结构菜单_mybatis分页查询/">ztree树形结构菜单_mybatis分页查询</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、二级树形菜单</p>
<p>效果图</p>
<p><img src="https://i.imgur.com/xC5UACi.png" alt=""></p>
<p>表结构<br><img src="https://i.imgur.com/yNutkpm.png" alt=""></p>
<p>业务层：</p>
<p>二级菜单实现思路：</p>
<p>1）查出父菜单（pid=0），通过遍历父菜单获得父菜单(id)，根据父菜单id值作为条件查出子菜单（子菜单pid=父菜单id），接着整理父子菜单关系；这种不推荐，假如所有菜单为18个，查出父菜单3个封装到集合时需要遍历18次，根据父菜单id作为查询子菜单的条件需要遍历3*18次。</p>
<p>2）一次性查出所有菜单18个，使用程序进行组合，这种推荐，以空间换时间。</p>
<p>封装菜单实体</p>
<p><img src="https://i.imgur.com/bNHeGw9.png" alt=""></p>
<p>业务层：</p>
<figure class="highlight java"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;TPermission&gt; <span class="title">getAllMenus</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存父菜单</span></span><br><span class="line">    List&lt;TPermission&gt; menus = <span class="keyword">new</span> ArrayList&lt;TPermission&gt;();</span><br><span class="line">    Map&lt;Integer, TPermission&gt; map = <span class="keyword">new</span> HashMap&lt;Integer, TPermission&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询所有菜单</span></span><br><span class="line">    <span class="comment">// 参数为null，表示不带条件查询菜单</span></span><br><span class="line">    List&lt;TPermission&gt; list = mapper.selectByExample(<span class="keyword">null</span>);</span><br><span class="line">    System.out.println(<span class="string">"所有菜单=========&gt;"</span>);</span><br><span class="line">    System.out.println(list);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1、将所有菜单都放在map中</span></span><br><span class="line">    <span class="comment">// 都是引用，如果从map中拿到这个数据改变以后，map中页面变化</span></span><br><span class="line">    <span class="keyword">for</span> (TPermission tPermission : list) &#123;</span><br><span class="line">        map.put(tPermission.getId(), tPermission);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2、先封装父菜单，再将子菜单放入到父菜单中</span></span><br><span class="line">    <span class="keyword">for</span> (TPermission tPermission : list) &#123;</span><br><span class="line">        <span class="keyword">if</span> (tPermission.getPid() == <span class="number">0</span>) &#123;</span><br><span class="line">            menus.add(tPermission);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// tPermission（子菜单），拿到父菜单</span></span><br><span class="line">            Integer pid = tPermission.getPid();</span><br><span class="line">            <span class="comment">// 拿到父菜单；以pid的值作为map中的菜单id，就是父菜单</span></span><br><span class="line">            TPermission p_menu = map.get(pid);</span><br><span class="line">            <span class="comment">// 拿到当前父菜单的子菜单；子菜单会有一些额外的问题</span></span><br><span class="line">            <span class="comment">// 这个list第一次获取是没有的，如果添加上一次以后。这个list是有的</span></span><br><span class="line">            List&lt;TPermission&gt; childs = p_menu.getChilds();</span><br><span class="line">            <span class="keyword">if</span> (childs != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 当前有子菜单</span></span><br><span class="line">                childs.add(tPermission);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 当前没有子菜单</span></span><br><span class="line">                childs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="comment">// 添加当前子菜单</span></span><br><span class="line">                childs.add(tPermission);</span><br><span class="line">                <span class="comment">// 将当前整理好的childs设置进去</span></span><br><span class="line">                p_menu.setChilds(childs);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"父菜单===========&gt;"</span>);</span><br><span class="line">    System.out.println(menus);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> menus;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制层</p>
<p>1）将整理好的父子菜单数据放入到session域中，当前用户的这次会话一直使用，只需要去数据库查询一次</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/main.html"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toMainPage</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 校验</span></span><br><span class="line">    <span class="comment">// 判断session中是否有这个用户，如果没有去登陆页面</span></span><br><span class="line">    Object object = session.getAttribute(Constants.LOGIN_USER);</span><br><span class="line">    <span class="keyword">if</span> (object == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 用户没登陆</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/login.jsp"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 用户登陆才来到主页，session中没有菜单，或者菜单被我们从session中清除了</span></span><br><span class="line">        <span class="keyword">if</span> (session.getAttribute(Constants.USER_MENUS) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 1、查出所有菜单，在页面进行显示</span></span><br><span class="line">            List&lt;TPermission&gt; menus = ps.getAllMenus();</span><br><span class="line">            <span class="comment">// 2、将查到的菜单放在session域中</span></span><br><span class="line">            <span class="comment">// 菜单这些数据没必要每次来到主页，都调用service方法进行查询；放在session用户，</span></span><br><span class="line">            <span class="comment">// 当前用户的这次会话一直使用，只需要去数据库查一次</span></span><br><span class="line">            session.setAttribute(Constants.USER_MENUS, menus);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"manager/main"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>前台：</p>
<p>1）引入：&lt;%@ taglib prefix=”fn” uri=”<a href="http://java.sun.com/jsp/jstl/functions&quot;%&gt;" target="_blank" rel="noopener">http://java.sun.com/jsp/jstl/functions&quot;%&gt;</a><br>计算后台传过来的list集合的长度：${fn:length(p_menu.childs)}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">	pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"fn"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/functions"</span>%&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"col-sm-3 col-md-2 sidebar"</span>&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"tree"</span>&gt;</span><br><span class="line">		&lt;ul style=<span class="string">"padding-left: 0px;"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-group"</span>&gt;</span><br><span class="line"></span><br><span class="line">			&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-group-item tree-closed"</span>&gt;&lt;a href=<span class="string">"main.html"</span>&gt;&lt;i</span><br><span class="line">					class="glyphicon glyphicon-dashboard"&gt;&lt;/i&gt; 控制面板&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">			&lt;!-- 遍历父菜单 --&gt;</span><br><span class="line">			&lt;c:forEach items=<span class="string">"$&#123;sessionScope.userMenus&#125;"</span> <span class="keyword">var</span>=<span class="string">"p_menu"</span>&gt;</span><br><span class="line">				&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-group-item tree-closed"</span>&gt;&lt;span&gt;&lt;i</span><br><span class="line">						class="$&#123;p_menu.icon&#125;"&gt;&lt;/i&gt;$&#123;p_menu.name&#125; &lt;span class="badge"</span><br><span class="line">						style="float: right"&gt;$&#123;fn:length(p_menu.childs)&#125;&lt;/span&gt;&lt;/span&gt;</span><br><span class="line">					&lt;ul style=<span class="string">"margin-top: 10px; display: none;"</span>&gt;</span><br><span class="line">						&lt;!-- 遍历子菜单 --&gt;</span><br><span class="line">						&lt;c:forEach items=<span class="string">"$&#123;p_menu.childs&#125;"</span> <span class="keyword">var</span>=<span class="string">"c_menu"</span>&gt;</span><br><span class="line">							&lt;li style=<span class="string">"height: 30px;"</span>&gt;&lt;a href=<span class="string">"$&#123;ctp&#125;/$&#123;c_menu.url&#125;"</span> data-action=<span class="string">"$&#123;c_menu.id&#125;"</span>&gt;&lt;i</span><br><span class="line">									class="$&#123;c_menu.icon&#125;"&gt;&lt;/i&gt;$&#123;c_menu.name&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">						&lt;/c:forEach&gt;</span><br><span class="line">					&lt;/ul&gt;&lt;/li&gt;</span><br><span class="line">			&lt;/c:forEach&gt;</span><br><span class="line">		&lt;/ul&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>2、mybatis分页查询</p>
<p>根据用户名或者账号进行查询</p>
<p>效果图：</p>
<p><img src="https://i.imgur.com/uATdmaF.png" alt=""></p>
<p>引入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 分页 插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>业务层：</p>
<p>1）带条件查询</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;TUser&gt; <span class="title">getAllUsersByCondition</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"UserServiceImpl.getAllUsersByCondition 带条件查询员工============&gt;"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 查询条件拼接</span></span><br><span class="line">    <span class="comment">// 第一次创建的条件，默认使用and连接的</span></span><br><span class="line">    TUserExample tUserExample = <span class="keyword">new</span> TUserExample();</span><br><span class="line">    Criteria criteria = tUserExample.createCriteria();</span><br><span class="line">    Criteria criteria2 = tUserExample.createCriteria();</span><br><span class="line">    <span class="keyword">if</span> (!str.trim().equals(<span class="string">""</span>)) &#123;</span><br><span class="line">        criteria.andLoginacctLike(<span class="string">"%"</span> + str + <span class="string">"%"</span>);</span><br><span class="line">        criteria.andUsernameLike(<span class="string">"%"</span> + str + <span class="string">"%"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    tUserExample.or(criteria2);</span><br><span class="line">    List&lt;TUser&gt; list_users_example = userMapper.selectByExample(tUserExample);</span><br><span class="line">    <span class="keyword">return</span> list_users_example;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制层：</p>
<p>1）mybatis分页插件会对结果集进行包装，必须在查询前设置： PageHelper.startPage(pn, ps);</p>
<p>2）查询后输入框数据回显：model.addAttribute(“sp”, search);（转发）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">users</span><span class="params">(@RequestParam(value = <span class="string">"pn"</span>, defaultValue = <span class="string">"1"</span>)</span> Integer pn,</span></span><br><span class="line"><span class="function">        @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"ps"</span>, defaultValue = <span class="string">"5"</span>)</span> Integer ps,</span></span><br><span class="line"><span class="function">        @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"sp"</span>, defaultValue = <span class="string">""</span>)</span> String search, Model model) </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"UserController.users 用户列表显示页===========&gt;"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"前台请求参数[第xxx页，每页显示xxx条数]==========&gt;"</span>);</span><br><span class="line">    System.out.println(pn);</span><br><span class="line">    System.out.println(ps);</span><br><span class="line">    <span class="comment">// 分页显示数据,这里设置必须放到查询数据之前，否则前台会有问题</span></span><br><span class="line">    PageHelper.startPage(pn, ps);</span><br><span class="line"></span><br><span class="line">    List&lt;TUser&gt; list_users = userService.getAllUsersByCondition(search);</span><br><span class="line">    System.out.println(<span class="string">"查询到的所有用户列表========&gt;"</span>);</span><br><span class="line">    System.out.println(list_users);</span><br><span class="line"></span><br><span class="line">    PageInfo&lt;TUser&gt; users = <span class="keyword">new</span> PageInfo&lt;&gt;(list_users, <span class="number">5</span>);</span><br><span class="line">    System.out.println(<span class="string">"分页后的数据处理"</span>);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">    <span class="comment">// 将查询用户列表数据放在请求域中，表单查询参数回显到页面</span></span><br><span class="line">    model.addAttribute(<span class="string">"users"</span>, users);</span><br><span class="line">    model.addAttribute(<span class="string">"sp"</span>, search);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"manager/permission/user"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>前台：</p>
<p>1）为所有分页连接绑定单击事件，让其动态的带上分页的查询参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> href = $(<span class="keyword">this</span>).attr(<span class="string">"href"</span>) + <span class="string">"&amp;sp="</span>+ $(<span class="string">"input[name='sp']"</span>).val()&lt;br/&gt;</span><br><span class="line">$(<span class="keyword">this</span>).attr(<span class="string">"href"</span>, href)</span><br></pre></td></tr></table></figure>
<p>2)全选和全不选函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//全选/全不选函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkall_reverse</span>(<span class="params">check_all_btn, check_btn</span>) </span>&#123;</span><br><span class="line">	check_all_btn.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">//如果是原生的属性，使用prop获取比较好</span></span><br><span class="line">		check_btn.prop(<span class="string">"checked"</span>, $(<span class="keyword">this</span>).prop(<span class="string">"checked"</span>))</span><br><span class="line">	&#125;)</span><br><span class="line">	check_btn.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">//当check_btn点满以后check_all_btn勾上，否则不选中</span></span><br><span class="line">		<span class="comment">//获取被选中的checkbtn个数</span></span><br><span class="line">		<span class="keyword">var</span> flag = check_btn.filter(<span class="string">":checked"</span>).length == check_btn.length</span><br><span class="line">		check_all_btn.prop(<span class="string">"checked"</span>, flag);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%@include</span> <span class="attr">file</span>=<span class="string">"/WEB-INF/includes/css-file.jsp"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/css/main.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">.tree li &#123;</span></span><br><span class="line"><span class="undefined">	list-style-type: none;</span></span><br><span class="line"><span class="undefined">	cursor: pointer;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">table tbody tr:nth-child(odd) &#123;</span></span><br><span class="line"><span class="undefined">	background: #F4F4F4;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">table tbody td:nth-child(even) &#123;</span></span><br><span class="line"><span class="undefined">	color: #C00;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">%</span></span></span><br><span class="line"><span class="tag">	    //设置导航条上的显示</span></span><br><span class="line"><span class="tag">				<span class="attr">pageContext.setAttribute</span>("<span class="attr">navinfo</span>", "用户维护");</span></span><br><span class="line"><span class="tag">				//设置点击高亮效果</span></span><br><span class="line"><span class="tag">				<span class="attr">pageContext.setAttribute</span>("<span class="attr">curUrl</span>", "<span class="attr">permission</span>/<span class="attr">user</span>/<span class="attr">list</span>");</span></span><br><span class="line"><span class="tag">	%&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 引入navbar--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">%@include</span> <span class="attr">file</span>=<span class="string">"/WEB-INF/includes/nav-bar.jsp"</span>%&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 引入树形菜单 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">%@include</span> <span class="attr">file</span>=<span class="string">"/WEB-INF/includes/user_menu.jsp"</span>%&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-default"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"panel-title"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-th"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 数据列表</span><br><span class="line">						<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-inline"</span> <span class="attr">role</span>=<span class="string">"form"</span> <span class="attr">style</span>=<span class="string">"float: left;"</span></span></span><br><span class="line"><span class="tag">							<span class="attr">action</span>=<span class="string">"$&#123;ctp &#125;/permission/user/list"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group has-feedback"</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group"</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span>查询条件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control has-success"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sp"</span></span></span><br><span class="line"><span class="tag">										<span class="attr">placeholder</span>=<span class="string">"用户名/账号查询"</span> <span class="attr">value</span>=<span class="string">"$&#123;sp&#125;"</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-warning"</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-search"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 查询</span><br><span class="line">							<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span></span></span><br><span class="line"><span class="tag">							<span class="attr">style</span>=<span class="string">"float: right; margin-left: 10px;"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">" glyphicon glyphicon-remove"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 删除</span><br><span class="line">						<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span></span></span><br><span class="line"><span class="tag">							<span class="attr">style</span>=<span class="string">"float: right;"</span> <span class="attr">onclick</span>=<span class="string">"window.location.href='add.html'"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-plus"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 新增</span><br><span class="line">						<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">hr</span> <span class="attr">style</span>=<span class="string">"clear: both;"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-responsive"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table  table-bordered"</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">"30"</span>&gt;</span>#<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">"30"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"checkall_btn"</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">th</span>&gt;</span>账号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">th</span>&gt;</span>名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">th</span>&gt;</span>邮箱地址<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">"100"</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;users.list&#125;"</span> <span class="attr">var</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.id&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">class</span>=<span class="string">"single_check"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.loginacct &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.username &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;user.email &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-success btn-xs"</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">" glyphicon glyphicon-check"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary btn-xs"</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">" glyphicon glyphicon-pencil"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger btn-xs"</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">" glyphicon glyphicon-remove"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"6"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">											<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span><br><span class="line">												<span class="comment">&lt;!-- 即使点击分页连接也应该带上查询条件的值 --&gt;</span></span><br><span class="line">												<span class="comment">&lt;!-- 给分页超链接绑定单击事件； --&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/permission/user/list?pn=1"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">												<span class="comment">&lt;!-- 是否还有前一页 --&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;users.hasPreviousPage&#125;"</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">														<span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/permission/user/list?pn=$&#123;users.prePage&#125;"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">												<span class="comment">&lt;!-- 遍历页数 --&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;users.navigatepageNums&#125;"</span> <span class="attr">var</span>=<span class="string">"pn"</span>&gt;</span></span><br><span class="line">													<span class="comment">&lt;!-- 当前页 --&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;pn==users.pageNum &#125;"</span>&gt;</span></span><br><span class="line">														<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">															<span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/permission/user/list?pn=$&#123;pn&#125;"</span>&gt;</span>$&#123;pn&#125;<span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">																<span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;pn != users.pageNum &#125;"</span>&gt;</span></span><br><span class="line">														<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/permission/user/list?pn=$&#123;pn&#125;"</span>&gt;</span>$&#123;pn &#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">												<span class="comment">&lt;!--是否还有下一页  --&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">"$&#123;users.hasNextPage&#125;"</span>&gt;</span></span><br><span class="line">													<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">														<span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/permission/user/list?pn=$&#123;users.nextPage&#125;"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">												<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">													<span class="attr">href</span>=<span class="string">"$&#123;ctp&#125;/permission/user/list?pn=$&#123;users.pages&#125;"</span>&gt;</span>末页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">											<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">								<span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">%@include</span> <span class="attr">file</span>=<span class="string">"/WEB-INF/includes/js-file.jsp"</span>%&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 引入树形菜单结构点击时动态显示页面高亮效果的js --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">%@include</span> <span class="attr">file</span>=<span class="string">"/WEB-INF/includes/common-js.jsp"</span>%&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			$(<span class="string">".list-group-item"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> ($(<span class="keyword">this</span>).find(<span class="string">"ul"</span>)) &#123;</span></span><br><span class="line"><span class="javascript">					$(<span class="keyword">this</span>).toggleClass(<span class="string">"tree-closed"</span>);</span></span><br><span class="line"><span class="javascript">					<span class="keyword">if</span> ($(<span class="keyword">this</span>).hasClass(<span class="string">"tree-closed"</span>)) &#123;</span></span><br><span class="line"><span class="javascript">						$(<span class="string">"ul"</span>, <span class="keyword">this</span>).hide(<span class="string">"fast"</span>);</span></span><br><span class="line"><span class="javascript">					&#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">						$(<span class="string">"ul"</span>, <span class="keyword">this</span>).show(<span class="string">"fast"</span>);</span></span><br><span class="line"><span class="undefined">					&#125;</span></span><br><span class="line"><span class="undefined">				&#125;</span></span><br><span class="line"><span class="undefined">			&#125;);</span></span><br><span class="line"><span class="undefined">		&#125;);</span></span><br><span class="line"><span class="javascript">		$(<span class="string">"tbody .btn-success"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">window</span>.location.href = <span class="string">"assignRole.html"</span>;</span></span><br><span class="line"><span class="undefined">		&#125;);</span></span><br><span class="line"><span class="javascript">		$(<span class="string">"tbody .btn-primary"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">window</span>.location.href = <span class="string">"edit.html"</span>;</span></span><br><span class="line"><span class="undefined">		&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">		</span></span><br><span class="line"><span class="javascript">		<span class="comment">//当前页面所在的哪个超链接是color:red</span></span></span><br><span class="line"><span class="javascript">		<span class="comment">//他的父list-group-item.  tree-closed是没有的</span></span></span><br><span class="line"><span class="javascript">		<span class="comment">//找到当前页面的a连接</span></span></span><br><span class="line"><span class="javascript">		<span class="comment">//使用css为某个元素加样式  list-group-item</span></span></span><br><span class="line"><span class="javascript">		<span class="comment">//为所有分页连接绑定单击事件，让其动态的带上分页的查询参数</span></span></span><br><span class="line"><span class="javascript">		$(<span class="string">".pagination"</span>).find(<span class="string">"a"</span>).click(</span></span><br><span class="line"><span class="javascript">				<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">					<span class="comment">//1、获取到查询表单的查询参数</span></span></span><br><span class="line"><span class="javascript">					<span class="comment">//不禁用默认行为，而是为超链接多拼装上查询条件</span></span></span><br><span class="line"><span class="javascript">					<span class="comment">//为超链接动态拼装查询条件</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">var</span> href = $(<span class="keyword">this</span>).attr(<span class="string">"href"</span>) + <span class="string">"&amp;sp="</span></span></span><br><span class="line"><span class="javascript">							+ $(<span class="string">"input[name='sp']"</span>).val()</span></span><br><span class="line"><span class="javascript">					$(<span class="keyword">this</span>).attr(<span class="string">"href"</span>, href)</span></span><br><span class="line"><span class="undefined">				&#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">//这是调用了抽取过来的方法；</span></span></span><br><span class="line"><span class="javascript">		checkall_reverse($(<span class="string">"#checkall_btn"</span>), $(<span class="string">".single_check"</span>))</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenlibing.github.io/myhexo/2019/01/22/ztree树形结构菜单_mybatis分页查询/" data-id="cjr7dlczb000bv0uerekklo77" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/myhexo/2019/01/22/hello-world/" class="article-date">
  <time datetime="2019-01-22T04:16:31.987Z" itemprop="datePublished">2019-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/myhexo/2019/01/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenlibing.github.io/myhexo/2019/01/22/hello-world/" data-id="cjr7dlcyq0001v0uej8ig48yq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-babel入门" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/myhexo/2019/01/01/babel入门/" class="article-date">
  <time datetime="2019-01-01T04:58:55.000Z" itemprop="datePublished">2019-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/myhexo/2019/01/01/babel入门/">babel入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、babel</p>
<blockquote>
<p>Babel is a toolchain that is mainly used to convert ECMAScript 2015+ code into a backwards compatible version of JavaScript in current and older browsers or environments.</p>
</blockquote>
<p>参考</p>
<p><a href="https://babeljs.io/setup#installation" target="_blank" rel="noopener">https://babeljs.io/setup#installation</a></p>
<p>1)生成package.json文件(描述项目所需要的各种模块，以及项目的配置信息—比如名称、版本、许可证等元数据)</p>
<p>npm init</p>
<pre><code>D:\mytest\babel&gt;npm  init
</code></pre><p>2)安装项目依赖</p>
<p>install Babel CLI locally </p>
<pre><code>D:\mytest\babel&gt;npm install --save-dev @babel/core @babel/cli
</code></pre><p>3）添加编译运行脚本命令</p>
<pre><code>&quot;scripts&quot;: {
&quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
&quot;build&quot;: &quot;babel src -d src_build&quot;
  },
</code></pre><p>结果</p>
<p><img src="https://i.imgur.com/IRIhf5S.png" alt=""></p>
<p>4）运行脚本命令</p>
<pre><code>D:\mytest\babel&gt;npm run build
</code></pre><p>此时并没有成功的将es6的语法转成es5</p>
<p><img src="https://i.imgur.com/fio2XsV.png" alt=""></p>
<p>5）添加.babelrc文件</p>
<p>Great! You’ve configured Babel but you haven’t made it actually do anything. Create a .babelrc config in your project root and enable some plugins.</p>
<p>To start, you can use the env preset, which enables transforms for ES2015+</p>
<pre><code>D:\mytest\babel&gt;npm install @babel/preset-env --save-dev
</code></pre><p>结果</p>
<p><img src="https://i.imgur.com/S1zb6x4.png" alt=""></p>
<p><img src="https://i.imgur.com/t0f2DeM.png" alt=""></p>
<p>6）重新运行脚本命令</p>
<pre><code>D:\mytest\babel&gt;npm run build
</code></pre><p><img src="https://i.imgur.com/BKUMyyi.png" alt=""></p>
<p>7)使用编译后的js</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;

&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;script type=&quot;text/javascript&quot; src=&apos;../src_build/1.js&apos;&gt;
  &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre><p>babel官网参考手册</p>
<p><a href="https://babeljs.io/docs/en/usage" target="_blank" rel="noopener">https://babeljs.io/docs/en/usage</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenlibing.github.io/myhexo/2019/01/01/babel入门/" data-id="cjr7dlcyk0000v0ueqo7vc3zs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js开发者经常忽略的基础知识点" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/myhexo/2018/01/22/js开发者经常忽略的基础知识点/" class="article-date">
  <time datetime="2018-01-22T04:58:55.000Z" itemprop="datePublished">2018-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/myhexo/2018/01/22/js开发者经常忽略的基础知识点/">js开发者经常忽略的基础知识点</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、字符串匹配</p>
<p>匹配所有</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Mistake</span></span><br><span class="line"><span class="comment">// 踩到坑了</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"David is an Arsenal fan, which means David is great"</span>;</span><br><span class="line">str.replace(<span class="string">"David"</span>, <span class="string">"Darren"</span>); </span><br><span class="line"><span class="comment">// "Darren is an Arsenal fan, which means David is great"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Desired</span></span><br><span class="line"><span class="comment">// 符合预期</span></span><br><span class="line">str.replace(<span class="regexp">/David/g</span>, <span class="string">"Darren"</span>); </span><br><span class="line"><span class="comment">// "Darren is an Arsenal fan, which means Darren is great"</span></span><br></pre></td></tr></table></figure>
<p>忽略大小写</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">str.replace(<span class="regexp">/david/gi</span>, <span class="string">"Darren"</span>); </span><br><span class="line"><span class="comment">// "Darren will always be an Arsenal fan, which means Darren will always be great"</span></span><br></pre></td></tr></table></figure>
<p>2、将“类数组”元素（比如 arguments 参数列表、节点列表和属性列表）转换成真正的数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> nodesArr = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">"div"</span>));</span><br><span class="line"><span class="comment">// "true" array of DIVs</span></span><br><span class="line"><span class="comment">// 得到一个由 div 元素组成的“真正的”数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> argsArr = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line"><span class="comment">// changes arguments to "true" array</span></span><br><span class="line"><span class="comment">// 把 arguments 转换成一个“真正的”数组</span></span><br></pre></td></tr></table></figure>
<p>克隆数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> clone = myArray.slice(<span class="number">0</span>); </span><br><span class="line"><span class="comment">// naive clone</span></span><br><span class="line"><span class="comment">// 浅克隆</span></span><br></pre></td></tr></table></figure>
<p>3、数组的sort方法</p>
<p>简单排序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>].sort();</span><br><span class="line"><span class="comment">// Returns: [1, 2, 3, 9]</span></span><br><span class="line"><span class="comment">// 返回 [1, 2, 3, 9]</span></span><br></pre></td></tr></table></figure>
<p>复杂排序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">[</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"Robin Van PurseStrings"</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"Theo Walcott"</span>, <span class="attr">age</span>: <span class="number">24</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"Bacary Sagna"</span>, <span class="attr">age</span>: <span class="number">28</span>  &#125;</span><br><span class="line">].sort(<span class="function"><span class="keyword">function</span>(<span class="params">obj1, obj2</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Ascending: first age less than the previous</span></span><br><span class="line">    <span class="comment">// 实现增序排列：前者的 age 小于后者</span></span><br><span class="line">    <span class="keyword">return</span> obj1.age - obj2.age;</span><br><span class="line">&#125;);</span><br><span class="line">    <span class="comment">// Returns:  </span></span><br><span class="line">    <span class="comment">// [</span></span><br><span class="line">    <span class="comment">//    &#123; name: "Theo Walcott", age: 24 &#125;,</span></span><br><span class="line">    <span class="comment">//    &#123; name: "Bacary Sagna", age: 28  &#125;,</span></span><br><span class="line">    <span class="comment">//    &#123; name: "Robin Van PurseStrings", age: 30 &#125;</span></span><br><span class="line">    <span class="comment">// ]</span></span><br></pre></td></tr></table></figure>
<p>4、push合并数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> mergeTo = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> mergeFrom = [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(mergeTo, mergeFrom);</span><br><span class="line"></span><br><span class="line">mergeTo; <span class="comment">// is: [4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>
<p>5、join拼接字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = [</span><br><span class="line">    <span class="string">'&lt;div&gt;'</span>,</span><br><span class="line">    <span class="string">'&lt;button id="lucky-draw"&gt;Lucky Draw&lt;/button&gt;'</span>,</span><br><span class="line">    <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">].join(<span class="string">''</span>)</span><br><span class="line">log(str)</span><br></pre></td></tr></table></figure>
<p>参考</p>
<p><a href="https://github.com/cssmagic/blog/issues/21" target="_blank" rel="noopener">https://github.com/cssmagic/blog/issues/21</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shenlibing.github.io/myhexo/2018/01/22/js开发者经常忽略的基础知识点/" data-id="cjr7dlcyu0003v0ue7y0irws1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/myhexo/">&laquo; Prev</a><a class="page-number" href="/myhexo/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/myhexo/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/myhexo/archives/2018/01/">January 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/myhexo/2019/01/22/优化点击事件绑定/">优化点击事件绑定</a>
          </li>
        
          <li>
            <a href="/myhexo/2019/01/22/网易邮箱服务器发送电子邮件_搭建James邮件服务器发送电子邮件/">网易邮箱服务器发送电子邮件_搭建James邮件服务器发送电子邮件</a>
          </li>
        
          <li>
            <a href="/myhexo/2019/01/22/maven配置/">maven配置</a>
          </li>
        
          <li>
            <a href="/myhexo/2019/01/22/用户分配角色_角色维护权限树/">用户分配角色_角色维护权限树</a>
          </li>
        
          <li>
            <a href="/myhexo/2019/01/22/my_en/">my_en</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 shenlibing<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/myhexo/" class="mobile-nav-link">Home</a>
  
    <a href="/myhexo/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/myhexo/fancybox/jquery.fancybox.css">
  <script src="/myhexo/fancybox/jquery.fancybox.pack.js"></script>


<script src="/myhexo/js/script.js"></script>



  </div>
</body>
</html>